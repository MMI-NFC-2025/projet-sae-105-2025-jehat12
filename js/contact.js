!function(){"use strict";const e=document.getElementById("contactForm"),t=document.getElementById("name"),n=document.getElementById("email"),o=document.getElementById("subject"),r=document.getElementById("message"),s=document.getElementById("consent"),a=e.querySelector(".form-submit"),i=document.getElementById("formSuccess"),l=document.getElementById("nameError"),c=document.getElementById("emailError"),m=document.getElementById("subjectError"),u=document.getElementById("messageError"),d=document.getElementById("consentError"),v=document.getElementById("messageCount"),g={name:/^[a-zA-Z√Ä-√ø\s'-]{2,50}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},y={empty:"Le nom est obligatoire",invalid:"Le nom doit contenir entre 2 et 50 caract√®res (lettres, espaces, tirets)",tooShort:"Le nom doit contenir au moins 2 caract√®res",tooLong:"Le nom ne peut pas d√©passer 50 caract√®res"},p={empty:"L'email est obligatoire",invalid:"Veuillez entrer une adresse email valide (ex: nom@example.com)"},E={empty:"Veuillez s√©lectionner un sujet"},f={empty:"Le message est obligatoire",tooShort:"Le message doit contenir au moins 10 caract√®res",tooLong:"Le message ne peut pas d√©passer 1000 caract√®res"},b={required:"Vous devez accepter l'utilisation de vos donn√©es"};function L(e,t,n){e.classList.add("error"),t.textContent=n,t.setAttribute("aria-live","polite")}function h(e,t){e.classList.remove("error"),t.textContent="",t.removeAttribute("aria-live")}function I(){const e=t.value.trim();return""===e?(L(t,l,y.empty),!1):e.length<2?(L(t,l,y.tooShort),!1):e.length>50?(L(t,l,y.tooLong),!1):g.name.test(e)?(h(t,l),!0):(L(t,l,y.invalid),!1)}function B(){const e=n.value.trim();return""===e?(L(n,c,p.empty),!1):g.email.test(e)?(h(n,c),!0):(L(n,c,p.invalid),!1)}function S(){return""===o.value?(L(o,m,E.empty),!1):(h(o,m),!0)}function x(){const e=r.value.trim();return""===e?(L(r,u,f.empty),!1):e.length<10?(L(r,u,f.tooShort),!1):e.length>1e3?(L(r,u,f.tooLong),!1):(h(r,u),!0)}function A(){return s.checked?(h(s,d),!0):(L(s,d,b.required),!1)}t&&(t.addEventListener("blur",I),t.addEventListener("input",()=>{t.classList.contains("error")&&I()})),n&&(n.addEventListener("blur",B),n.addEventListener("input",()=>{n.classList.contains("error")&&B()})),o&&o.addEventListener("change",S),r&&(r.addEventListener("blur",x),r.addEventListener("input",()=>{const e=r.value.length;v.textContent=`${e} / 1000`,v.style.color=e>900?"#EF4444":e>800?"#F59E0B":"",r.classList.contains("error")&&x()})),s&&s.addEventListener("change",A),e&&e.addEventListener("submit",function(l){l.preventDefault();const c=I(),m=B(),u=S(),d=x(),g=A();if(c&&m&&u&&d&&g)a.disabled=!0,a.querySelector(".form-submit__text").textContent="Envoi en cours...",setTimeout(()=>{e.style.display="none",i.style.display="block",i.scrollIntoView({behavior:"smooth",block:"center"}),console.log("üìß Formulaire soumis avec succ√®s !"),console.log({name:t.value,email:n.value,subject:o.value,message:r.value,consent:s.checked,timestamp:(new Date).toISOString()}),setTimeout(()=>{e.reset(),v.textContent="0 / 1000",a.disabled=!1,a.querySelector(".form-submit__text").textContent="Envoyer le message",e.style.display="block",i.style.display="none"},5e3)},1500);else{const t=e.querySelector(".error");t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus())}});[t,n,o,r].forEach(e=>{e&&(e.addEventListener("focus",function(){this.parentElement.style.transform="translateY(-2px)"}),e.addEventListener("blur",function(){this.parentElement.style.transform=""}))}),e.addEventListener("keydown",t=>{if("Enter"===t.key&&"TEXTAREA"!==t.target.tagName){t.preventDefault();const n=Array.from(e.elements),o=n.indexOf(t.target),r=n[o+1];r&&"BUTTON"!==r.tagName&&r.focus()}});const D=document.createElement("input");D.setAttribute("type","text"),D.setAttribute("name","website"),D.setAttribute("tabindex","-1"),D.setAttribute("autocomplete","off"),D.style.position="absolute",D.style.left="-9999px",e.appendChild(D),e.addEventListener("submit",e=>{if(""!==D.value)return e.preventDefault(),console.warn("üö´ Bot d√©tect√© via honeypot"),!1}),function(){const e=localStorage.getItem("contactFormDraft");if(e)try{const s=JSON.parse(e);Date.now()-s.timestamp<864e5?(t.value=s.name||"",n.value=s.email||"",o.value=s.subject||"",r.value=s.message||"",v.textContent=`${s.message.length} / 1000`,console.log("üìù Brouillon restaur√©")):localStorage.removeItem("contactFormDraft")}catch(e){console.error("Erreur chargement brouillon:",e)}}(),setInterval(function(){const e={name:t.value,email:n.value,subject:o.value,message:r.value,timestamp:Date.now()};localStorage.setItem("contactFormDraft",JSON.stringify(e))},5e3),e.addEventListener("submit",()=>{setTimeout(()=>{localStorage.removeItem("contactFormDraft")},2e3)}),console.log("‚úÖ Formulaire de contact initialis√© avec validation compl√®te")}();